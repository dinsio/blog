<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>leancloud</title>
    <link rel="stylesheet" type="text/css" href="wangEditor/css/wangEditor.css">
    <style type="text/css">
        #editor-trigger {
            height: 300px;
            max-height: 500px;
        }
        .container {
            width: 100%;
            margin: 0 auto;
            position: relative;
        }
    </style>
</head>
<body>
    <p>
        <a href="javascript:createNew(2);">添加测试数据</a>
        <a href="javascript:doQuery();">查询</a>
    </p>

    <script type="text/javascript" src="js/av.js"></script>
    <script type="text/javascript">
        AV.init('4rYkRWstARsGUQIX3jf6CeE9-gzGzoHsz', 'jfpNLfAjfWO7lEeg2oQaXUn6');
        var TestTable = AV.Object.extend('TestTable');
        var query = new AV.Query('TestTable');
        function createNew(i){
            var testObject = new TestTable();
            testObject.save({
              title: '标题' + i,
              content: '内容' + i + '，包含' + i + '个关键字'
            }, {
              success: function(object) {
                alert('LeanCloud Rocks!');
              }
            });
        }
        function doQuery(){
            var query = new AV.Query('TestTable');
            query.startsWith('content', '好');
            query.find().then(function(results) {
              console.log('Successfully retrieved ' + results.length + ' posts.');
              // 处理返回的结果数据
              for (var i = 0; i < results.length; i++) {
                var object = results[i];
                console.log(object.id + ' - ' + object.get('content'));
              }
            }, function(error) {
              console.log('Error: ' + error.code + ' ' + error.message);
            });
        }
    </script>
</body>
</html>